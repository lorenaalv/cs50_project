# register.html and register flask route: With our register.html, we provide an interface for registration of new users. It includes fields for entering a username, password, and then confirmation of password for security. The form valides the user input to ensure all fields are correct and match. Upon submission, the form sends the user’s registration details to the server. The register flask route manages user registration. On POST requests ( the submission of the form to register ), it validates the username and password, ensures the passwords match, checks if the username is already in use, and if all is passed, the user’s password is hashed for secure storage and a new user record is created in the database. If any errors occur on the user’s part, the user is redirected to an apology meme message.

# login.html and login flask route: With our login.html, we provide a user interface for logging into our website's application. It features a form with fields asking for a username and password. Upon submission of the form, the user’s credentials are sent to the server for authentication. The flask route for login processes the login requests. When the form is submitted via POST, it validates the username and password and checks our database for the username and verification of the password. If the credentials do not match, the user is prompted with incorrect password or username. If the credentials are correct, the user is logged in and the user ID is stored in the session.

# log_purchases.html and log_purchase flask route: With our log_purchases.html file, we provide a user interface for logging new purchases made on the road. It contains a form with fields for the item name, purchase location, and price. Users fill in these details and submit the form to record a new purchase. The flask route for log_purchase handles the form submission from “log_purchase.html.” When the form is submitted, it validates the input data, uses the Google Maps API to convert the location into the latitude and longitude coordinates, and then saves the purchase information along with these coordinates into the database. If accessed via a GET request, it simply displays the “log_purchase.html” form. The log_purchase flask route and log_purchases.html are crucial to getting the purchased items onto our map via geocoding.

# view_purchases.html and view_purchases flask route: With our view_purchases.html, the template is designed to display a list of purchases made by the user in a table. It contains data with columns for item, location, price, and timestamp of the purchase from the SQL purchases.db. Additionally, it provides a delete link for each purchase, allowing users to remove entries from the list and their respective markers from the map. The view_purchases flask route is responsible for displaying the user’s purchase history. When accessed, it retrieves the logged-in user’s ID from the session, queries the database for all purchases made, and then passes the data to the view_purchases.html for rendering.

# delete_purchase flask route: The delete_purchase route in our Flask Application allows for the deletion of purchases and complete removal from the map and data table. It takes a “purchase_id” as a parameter from the URL and retrieves the logged-in user’s ID from the session, checking if the purchase exists and belongs to said user, and deletes it from the database. After deletion, the purchase isn’t found or doesn’t belong to the user.

# map.html and map flask route: The HTML template for map.html displays a Google Map and a table of user purchases. The map shows a marker based on the geolocation (latitude and longitude) of each purchase submitted from the log_purchase. We use JavaScript to initialize the map with Google Maps API and iterate over “purchases” data, creating a marker on the map for each purchase with valid geolocation data. The title of each marker is set to the name of the purchased item. Users can view this title when hovering over a marker on the map. The flask route is responsible for displaying the map with markers representing locations of the purchases made by the logged-in user. It retrieves the user’s ID, fetches all purchases made by the user from the database, passes this purchase data to the map.html template for rendering the map and markers, and the route ensures that only authenticated users can access the purchase map.
